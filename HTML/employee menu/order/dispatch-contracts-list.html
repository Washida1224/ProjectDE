<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>é…è»Šä¾é ¼å—ä»˜ä¸€è¦§</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <link rel="stylesheet" href="../../CSS/layout-staff.css">
  <link rel="stylesheet" href="../../CSS/document-list.css">
</head>
<body>
  <!-- ãƒ˜ãƒƒãƒ€ãƒ¼ -->
  <header>
    <div class="navbar">
      <div class="logo">é‹è¡Œç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ï¼šé…è»Šä¾é ¼å—ä»˜ä¸€è¦§</div>
      <nav class="nav-links" id="navLinks">
        <a href="#">ãƒ»ãƒ­ã‚°ã‚¤ãƒ³è€…æƒ…å ±</a>
        <a href="#" class="logout"><i class="fas fa-sign-out-alt"></i> ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ</a>
      </nav>
      <div class="hamburger" id="hamburger">
        <i class="fas fa-bars"></i>
      </div>
    </div>
  </header>
  <!-- ãƒ¡ã‚¤ãƒ³ -->
  <main class="document-list-page">
    <!-- ãƒ•ã‚£ãƒ«ã‚¿ã‚¨ãƒªã‚¢ -->
    <div class="filter-box">
      <input type="text" id="searchInput" placeholder="ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰æ¤œç´¢...">
      <!-- æ—¥ä»˜é¸æŠ -->
      <input type="date" id="dateFilter">
      <select id="dateSort">
        <option value="new">æ–°ã—ã„é †</option>
        <option value="old">å¤ã„é †</option>
      </select>
    </div>
    <!-- ä¸€è¦§ãƒ†ãƒ¼ãƒ–ãƒ« -->
    <div class="table-container">
      <table id="reportTable">
        <thead>
          <tr>
           <tr>
           <th>æ–½è¨­ID</th>
           <th>æ–½è¨­å</th>
           <th>å¥‘ç´„é–‹å§‹æ—¥</th>
           <th>æ‹…å½“è€…</th>
           <th>æ‰€åœ¨åœ°</th>
           <th>å¥‘ç´„ç¨®åˆ¥</th>
           <th>ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹</th>
           <th>è©³ç´°</th>
         </tr>
         </tr>
        </thead>
        <tbody>
         <tr>
           <td>F001</td>
           <td>ã€‡ã€‡å¹¼ç¨šåœ’</td>
           <td>2024-04-01</td>
           <td>ä½è—¤ èŠ±å­</td>
           <td>æ±äº¬éƒ½ä¸–ç”°è°·åŒº</td>
           <td>é€è¿ãƒã‚¹</td>
           <td>å¥‘ç´„ä¸­</td>
           <td><a href="#" class="detail-btn">è©³ç´°</a></td>
         </tr>
         <tr>
           <td>F002</td>
           <td>âœ•âœ•ç—…é™¢</td>
           <td>2023-11-15</td>
           <td>ç”°ä¸­ å¤ªéƒ</td>
           <td>ç¥å¥ˆå·çœŒæ¨ªæµœå¸‚</td>
           <td>å·¡å›</td>
           <td>å¥‘ç´„ä¸­</td>
           <td><a href="#" class="detail-btn">è©³ç´°</a></td>
         </tr>
         <tr>
           <td>F003</td>
           <td>â–³â–³ç¦ç¥‰æ–½è¨­</td>
           <td>2025-10-01</td>
           <td>å±±æœ¬ å¥å¤ª</td>
           <td>åƒè‘‰çœŒèˆ¹æ©‹å¸‚</td>
           <td>é€è¿ãƒ»å·¡å›</td>
           <td>å¥‘ç´„ä¸­</td>
           <td><a href="#" class="detail-btn">è©³ç´°</a></td>
         </tr>
          </tr>
          <tr>
           <td>F004</td>
           <td>â–¡â–¡ä¼æ¥­</td>
           <td>2025-05-20</td>
           <td>ä¸­æ‘ ç†æµ</td>
           <td>åŸ¼ç‰çœŒã•ã„ãŸã¾å¸‚</td>
           <td>ç¤¾ç”¨</td>
           <td>å¥‘ç´„çµ‚äº†</td>
           <td><a href="#" class="detail-btn">è©³ç´°</a></td>
         </tr>
       </tbody>
      </table>
    </div>

    <!-- æˆ»ã‚‹ãƒœã‚¿ãƒ³ -->
    <div class="bottom-left">
      <a href="order-menu.html" class="back-btn">â† æ›¸é¡ç®¡ç†ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã«æˆ»ã‚‹</a>
    </div>
  </main>

  <!-- ãƒ•ãƒƒã‚¿ãƒ¼ -->
  <footer>
    <p>Â© 2025 ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¼”ç¿’D,Eï¼šA08 | All Rights Reserved</p>
  </footer>

  <script>

//ãƒãƒ³ãƒãƒ¼ã‚¬ãƒ¼ãƒ¡ãƒ‹ãƒ¥ãƒ¼
const hamburger = document.getElementById("hamburger");
const navLinks = document.getElementById("navLinks");
hamburger.addEventListener("click", () => {
Â  navLinks.classList.toggle("active");
});



const reportTableBody = document.querySelector("#reportTable tbody");
// å…¨ã¦ã®è¡Œã‚’é…åˆ—ã¨ã—ã¦ä¿æŒã—ã€ã‚½ãƒ¼ãƒˆãƒ»ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ã®åŸºç‚¹ã¨ã™ã‚‹
const reportRows = Array.from(reportTableBody.querySelectorAll("tr")); 
const searchInput = document.getElementById("searchInput"); // ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰æ¤œç´¢è¦ç´ ã‚‚å–å¾—
const dateFilter = document.getElementById("dateFilter");
const dateSort = document.getElementById("dateSort");
const tableHeadings = document.querySelectorAll("#reportTable thead th");
const idHeader = tableHeadings[0];

// ã‚½ãƒ¼ãƒˆãƒ»ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ã®çŠ¶æ…‹ã‚’ä¿æŒ
let idSortState = 'none'; // 'none', 'asc', 'desc'
// æ—¥ä»˜ã‚½ãƒ¼ãƒˆã®åˆ—ï¼ˆå¥‘ç´„é–‹å§‹æ—¥ï¼‰ã¯ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹2ã§å¤‰æ›´ãªã—
let dateSortState = dateSort.value; // 'new', 'old'

// æ—¥ä»˜ã‚½ãƒ¼ãƒˆã®ã‚¢ã‚¤ã‚³ãƒ³ã‚’æ›´æ–°ã™ã‚‹ãƒ˜ãƒ«ãƒ‘ãƒ¼é–¢æ•°
function updateDateSortIcon() {
Â // dateSortã®è¦ªè¦ç´ ã‹ã‚‰ã‚¢ã‚¤ã‚³ãƒ³ã‚’å–å¾—ï¼ˆåˆå›å®Ÿè¡Œæ™‚ã«è¿½åŠ ã•ã‚Œã‚‹ï¼‰ 
Â  let icon = dateSort.parentNode.querySelector('.date-sort-icon');
if (!icon) {
Â // ã‚¢ã‚¤ã‚³ãƒ³ãŒãªã„å ´åˆã¯è¿½åŠ 
Â dateSort.insertAdjacentHTML('afterend', ' <i class="fas fa-sort date-sort-icon"></i>');
Â icon = dateSort.parentNode.querySelector('.date-sort-icon');
Â }

Â icon.classList.remove('fa-sort', 'fa-sort-up', 'fa-sort-down');
Â if (dateSortState === 'new') {
Â  Â icon.classList.add('fa-sort-down'); // æ–°ã—ã„é † (æ—¥ä»˜ã¯é™é †)
Â  } else if (dateSortState === 'old') {
Â  icon.classList.add('fa-sort-up'); // å¤ã„é † (æ—¥ä»˜ã¯æ˜‡é †)
Â  } else {
Â  Â  icon.classList.add('fa-sort');
Â  }
}

// IDã‚½ãƒ¼ãƒˆã®ã‚¢ã‚¤ã‚³ãƒ³ã‚’æ›´æ–°ã™ã‚‹ãƒ˜ãƒ«ãƒ‘ãƒ¼é–¢æ•°
function updateIdSortIcon() {
let icon = idHeader.querySelector('.fas');
Â if (!icon) {
Â idHeader.innerHTML += ' <i class="fas fa-sort"></i>';
Â icon = idHeader.querySelector('.fas');
Â idHeader.style.cursor = 'pointer';
Â }

Â icon.classList.remove('fa-sort', 'fa-sort-up', 'fa-sort-down');
Â if (idSortState === 'asc') {
Â icon.classList.add('fa-sort-up');
Â } else if (idSortState === 'desc') {
Â  Â icon.classList.add('fa-sort-down');
Â } else {
Â icon.classList.add('fa-sort');
Â }
}

// ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ã¨ã‚½ãƒ¼ãƒˆã‚’å®Ÿè¡Œã—ã€ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’æ›´æ–°ã™ã‚‹ãƒ¡ã‚¤ãƒ³é–¢æ•°
function updateTable() {
Â  // 1. ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚° (æ—¥ä»˜ã¨ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰)
Â  const filterDate = dateFilter.value;
Â  const filterText = searchInput.value.toLowerCase();

Â  const visibleRows = reportRows.filter(row => {
Â  Â  const dateCell = row.cells[2].textContent; // å¥‘ç´„é–‹å§‹æ—¥ (ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹2)
Â  Â  
Â  Â  // æ—¥ä»˜ãƒ•ã‚£ãƒ«ã‚¿ (å¥‘ç´„é–‹å§‹æ—¥)
Â  Â  const isDateMatch = !filterDate || dateCell === filterDate;
Â  Â  if (!isDateMatch) return false;

Â  Â  // ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰æ¤œç´¢ãƒ•ã‚£ãƒ«ã‚¿ (å…¨ã‚»ãƒ«ã‚’å¯¾è±¡ã¨ã™ã‚‹ç°¡æ˜“æ¤œç´¢)
Â  Â  if (filterText) {
Â  Â  Â  // æœ€çµ‚åˆ—ï¼ˆè©³ç´°ãƒœã‚¿ãƒ³ï¼‰ã¯é™¤å¤–ã—ã¦æ¤œç´¢
Â  Â  Â  const rowText = Array.from(row.cells).slice(0, -1).map(c => c.textContent).join(' ').toLowerCase();
Â  Â  Â  return rowText.includes(filterText);
Â  Â  }

Â  Â  return true;
Â  });
Â  
Â  // 2. ã‚½ãƒ¼ãƒˆã®é©ç”¨
Â  visibleRows.sort((a, b) => {
Â  Â  // ğŸš¨ æ–½è¨­IDã‚½ãƒ¼ãƒˆãŒæœ‰åŠ¹ãªå ´åˆ (F001, F002ãªã©ã®æ–‡å­—åˆ—+æ•°å­—ã«å¯¾å¿œ)
Â  Â  if (idSortState !== 'none') {
Â  Â  Â  const idA = a.cells[0].textContent;
Â  Â  Â  const idB = b.cells[0].textContent;

Â  Â  Â  // localeCompareã§æ–‡å­—åˆ—å†…ã®æ•°å­—ã‚’æ­£ã—ãæ¯”è¼ƒ (F001 < F002)
Â  Â  Â  if (idSortState === 'asc') {
Â  Â  Â  Â  return idA.localeCompare(idB, undefined, { numeric: true, sensitivity: 'base' });
Â  Â  Â  } else {
Â  Â  Â  Â  return idB.localeCompare(idA, undefined, { numeric: true, sensitivity: 'base' });
Â  Â  Â  }
Â  Â  }

Â  Â  // æ—¥ä»˜ã‚½ãƒ¼ãƒˆãŒæœ‰åŠ¹ãªå ´åˆ (å¥‘ç´„é–‹å§‹æ—¥: ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹2)
Â  Â  if (dateSortState !== 'none') {
Â  Â  Â  const dateA = new Date(a.cells[2].textContent);
Â  Â  Â  const dateB = new Date(b.cells[2].textContent);
Â  Â  Â  return dateSortState === 'new' ? (dateB - dateA) : (dateA - dateB);
Â  Â  }

Â  Â  return 0; // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®é †åºã‚’ç¶­æŒ
Â  });

Â  // 3. ãƒ†ãƒ¼ãƒ–ãƒ«ã®å†æç”»
Â  reportTableBody.innerHTML = '';
Â  visibleRows.forEach(row => reportTableBody.appendChild(row));
Â  
Â  // 4. ã‚¢ã‚¤ã‚³ãƒ³ã®æ›´æ–°
Â  updateIdSortIcon();
Â  updateDateSortIcon();
}

// IDãƒ˜ãƒƒãƒ€ãƒ¼ã‚¯ãƒªãƒƒã‚¯ã«ã‚ˆã‚‹ã‚½ãƒ¼ãƒˆåˆ‡ã‚Šæ›¿ãˆ
idHeader.addEventListener('click', () => {
Â  // ã‚½ãƒ¼ãƒˆçŠ¶æ…‹ã®æ›´æ–° (none/desc -> asc / asc -> desc)
Â  if (idSortState === 'none' || idSortState === 'desc') {
Â  Â  idSortState = 'asc'; 
Â  Â  dateSortState = 'none'; // IDã‚½ãƒ¼ãƒˆæ™‚ã¯æ—¥ä»˜ã‚½ãƒ¼ãƒˆã‚’è§£é™¤
Â  } else if (idSortState === 'asc') {
Â  Â  idSortState = 'desc'; 
Â  Â  dateSortState = 'none'; // IDã‚½ãƒ¼ãƒˆæ™‚ã¯æ—¥ä»˜ã‚½ãƒ¼ãƒˆã‚’è§£é™¤
Â  } 
Â  
Â  updateTable();
});

// æ—¥ä»˜ã‚½ãƒ¼ãƒˆï¼ˆSelect Boxï¼‰ã®å¤‰æ›´
dateSort.addEventListener("change", () => {
Â  dateSortState = dateSort.value;
Â  idSortState = 'none'; // æ—¥ä»˜ã‚½ãƒ¼ãƒˆæ™‚ã¯IDã‚½ãƒ¼ãƒˆã‚’è§£é™¤
Â  updateTable();
});

// æ—¥ä»˜ãƒ•ã‚£ãƒ«ã‚¿ï¼ˆInput Dateï¼‰ã®å¤‰æ›´
dateFilter.addEventListener("change", updateTable);

// ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰æ¤œç´¢
searchInput.addEventListener("input", updateTable);


// åˆæœŸè¡¨ç¤ºã®å®Ÿè¡Œï¼ˆã‚¢ã‚¤ã‚³ãƒ³è¨­å®šã¨åˆæœŸã‚½ãƒ¼ãƒˆï¼‰
updateTable(); 

</script>







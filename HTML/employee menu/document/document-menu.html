<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>配車依頼管理メニュー</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <link rel="stylesheet" href="../../CSS/layout-staff.css">
  <link rel="stylesheet" href="../../CSS/menu-staff.css">
</head>

<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js";
  import { getAuth, signOut, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js";

  const firebaseConfig = {
    apiKey: "AIzaSyC7AK6I_KmkFEZIaWJokO5HN1UnejpHZ3U",
    authDomain: "the-bus-94fe3.firebaseapp.com",
    projectId: "the-bus-94fe3",
    storageBucket: "the-bus-94fe3.appspot.com",
    messagingSenderId: "782387450057",
    appId: "1:782387450057:web:d6d4dcf0fd778ff6533d18"
  };

  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);

  onAuthStateChanged(auth, (user) => {
    const userEmailElement = document.getElementById("userEmail");
    if (user) {
      userEmailElement.textContent = `${user.email}`;
    } else {
      window.location.href = "../syorui/login.html";
    }
  });

  document.getElementById("logoutBtn").addEventListener("click", async () => {
    try {
      await signOut(auth);
      window.location.href = "../syorui/login.html";
    } catch (error) {
      console.error("ログアウト失敗:", error);
      alert("ログアウトに失敗しました。");
    }
  });
</script>
<style>
  .user-info {
    display: flex;
    align-items: center;
    gap: 10px;
  }

  #userEmail {
    font-size: 0.9rem;
  }

  .logout-btn {
    background-color: #39bdec;
    color: white;
    border: none;
    border-radius: 6px;
    padding: 8px 16px;
    font-size: 0.9rem;
    cursor: pointer;
    transition: background 0.3s;
  }

  .logout-btn:hover {
    background-color: #0a6c7c;
  }
</style>
  
<body>
  <!-- ヘッダー -->
  <header>
        <div class="navbar">
            <div class="logo" >運行管理システム:書類管理メニュー</div>
            <div class="user-info">
              <span id="userEmail">ログイン中: 読み込み中...</span>
              <button id="logoutBtn" class="logout-btn">ログアウト</button>
            </div>            
        </div>
    </header>

  <!-- メイン -->
  <main>
    <div class="menu-container grid-4">
      <a href="report-list.html" class="menu-card">
        <i class="fas fa-file-alt fa-3x"></i>
        <h2>日報閲覧</h2>
        <p>提出された運行日報を確認できます。</p>
      </a>
      <a href="accident-list.html" class="menu-card">
        <i class="fas fa-exclamation-triangle fa-3x"></i>
        <h2>事故報告書閲覧</h2>
        <p>発生した事故の報告書を確認できます。</p>
      </a>
    </div>
  </main>

  <!-- 戻るボタン -->
  <div class="back-btn">
    <a href="../../index-staff.html"><i class="fas fa-arrow-left"></i> 戻る</a>
  </div>

  <!-- フッター -->
  <footer>
    <p>© 2025 運行管理システム | All Rights Reserved</p>
  </footer>

  <script>
    // ハンバーガーメニュー
    const hamburger = document.getElementById("hamburger");
    const navLinks = document.getElementById("navLinks");
    hamburger.addEventListener("click", () => {
      navLinks.classList.toggle("active");
    });
  </script>
</body>
</html>


